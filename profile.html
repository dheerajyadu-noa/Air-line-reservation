<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Account – SkyBook</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="css/styles.css" rel="stylesheet" />
</head>
<body>

<!-- SIMPLE HEADER -->
<nav class="navbar navbar-light bg-white border-bottom shadow-sm">
  <div class="container">
    <a class="navbar-brand fw-bold" href="index.html">
      <i class="bi bi-airplane-fill me-2"></i>SkyBook
    </a>

    <button class="btn btn-danger btn-sm" onclick="logoutUser()">
      <i class="bi bi-box-arrow-right me-1"></i> Logout
    </button>
  </div>
</nav>

<div class="container py-5">

  <!-- PROFILE AREA -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h4 class="mb-2"><i class="bi bi-person-circle me-2"></i> My Profile</h4>
      <p class="text-secondary">Here is your saved account information.</p>

      <div id="profileInfo" class="mt-3"></div>
    </div>
  </div>

  <!-- TICKETS AREA -->
  <div class="card shadow-sm">
    <div class="card-body">
      <h4 class="mb-3"><i class="bi bi-ticket-perforated me-2"></i> My Tickets</h4>

      <div id="ticketList">
        <p class="text-secondary">You don’t have any tickets yet.</p>
      </div>
    </div>
  </div>

</div>

<script>
  // SHOW PROFILE DETAILS
  document.addEventListener("DOMContentLoaded", () => {

    // if user is not logged in, kick them out
    if (localStorage.getItem("isLoggedIn") !== "true") {
      window.location.href = "login.html";
      return;
    }

    let email = localStorage.getItem("userEmail");

    document.getElementById("profileInfo").innerHTML = `
      <p><strong>Email:</strong> ${email}</p>
      <p><strong>First Name:</strong> Not saved</p>
      <p><strong>Last Name:</strong> Not saved</p>
    `;

    // Load saved ticket if exists
    let ticket = localStorage.getItem("myTicket");

    if (ticket) {
      document.getElementById("ticketList").innerHTML = `
        <div class="border rounded p-3 mb-3">
          <p><strong>From:</strong> ${JSON.parse(ticket).from}</p>
          <p><strong>To:</strong> ${JSON.parse(ticket).to}</p>
          <p><strong>Date:</strong> ${JSON.parse(ticket).date}</p>
          <p><strong>Passengers:</strong> ${JSON.parse(ticket).pax}</p>
        </div>
      `;
    }
  });

  // LOGOUT FUNCTION
  function logoutUser() {
    localStorage.removeItem("isLoggedIn");
    window.location.href = "login.html";
  }
</script>

</body>
</html>
